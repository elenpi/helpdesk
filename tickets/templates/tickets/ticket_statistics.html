{% extends "base.html" %}

{% load static %}


{% block title %}Ticket Statistics{% endblock %}

{% block css_files %}
    <link rel="stylesheet" href="{% static "tickets/ticket_statistics.css" %}"/>
{% endblock %}

{% block content %}

    <div class="container pb-1 mt-5">
        <div class="row">
            <div class="col">
                <div class="overflow-hidden mb-3">
                    <h2 class="font-weight-bold text-8 mb-0 appear-animation" data-appear-animation="textEntrance" data-appear-animation-delay="700">
                        Ticket stats
                    </h2>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <section class="card card-admin">
                    <header class="card-header">
                        <div class="card-actions">
                            <a href="#" class="card-action card-action-toggle" data-card-toggle></a>
                            <a href="#" class="card-action card-action-dismiss" data-card-dismiss></a>
                        </div>

                        {% comment %}<h2 class="card-title">Easy Pie Chart</h2>
                        <p class="card-subtitle">Lightweight jQuery plugin to render and animate nice pie charts with the HTML5 canvas element.</p>{% endcomment %}
                    </header>
                    <div class="card-body">
                        <div class="row text-center">
                            <div class="col-lg-6">
                                <div class="circular-bar">
                                    <div class="circular-bar-chart" data-percent="85" data-plugin-options='{ "barColor": "#0088CC", "delay": 300 }'>
                                        <strong>Design</strong>
                                        <label><span class="percent">85</span>%</label>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="circular-bar">
                                    <div class="circular-bar-chart" data-percent="60" data-plugin-options='{ "barColor": "#2BAAB1", "delay": 600 }'>
                                        <strong>HTML</strong>
                                        <label><span class="percent">60</span>%</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>

        <div class="ticket-stat-box">
            <p>Average Resolution Time: {{ resolution_time }}</p>
            <p>Minimun Resolution Time: {{ min_resolution_time }}</p>
            <p>Maximum Resolution Time: {{ max_resolution_time }}</p>
            <p>Average Response Time: {{ response_time }}</p>
            <p>Minimun Response Time: {{ min_response_time }}</p>
            <p>Maximum Response Time: {{ max_response_time }}</p>
        </div>

        <div class="chart-container">
            <div id="status-chart" class="chart"></div>
            <div id="assignee-chart" class="chart"></div>
            <div id="resolution-chart" class="chart"></div>
        </div>

        <script type="text/javascript">
            var statusSpec = {{ status_json | safe }};
            var assigneeSpec = {{ assignee_json | safe }};
            var resolutionSpec = {{ resolution_json | safe }};
            vegaEmbed('#status-chart', statusSpec);
            vegaEmbed('#assignee-chart', assigneeSpec);
            vegaEmbed('#resolution-chart', resolutionSpec);
        </script>
    </div>
{% endblock %}

{% block javascript %}
    <script>
        // JavaScript code for rendering the charts goes here
    </script>
{% endblock %}